<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign In | il vanto</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<header>
    <div class="nav-container">
        <a href="index.html" class="logo">il vanto</a>
    </div>
    <div class="language-switcher">
    <button class="language-btn">
         <!-- ÿ£Ÿà ÿßÿ≥ÿ™ÿÆÿØŸÖ ÿ£ŸäŸÇŸàŸÜÿ© ÿ™ÿ±ÿ¨ŸÖÿ© -->
        <span>üåê</span>
        <i class="dropdown-arrow">‚ñº</i>
    </button>
    <div class="language-dropdown">
        <a href="#" data-lang="en">English</a>
        <a href="#" data-lang="ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</a>
        <a href="#" data-lang="zh">‰∏≠Êñá</a>
    </div>
</div>
</header>

<div class="auth-container">
    <h2 id="form-title">Sign In</h2>

    <form id="login-form">
        <div class="form-group">
            <label>Email Address</label>
            <input type="email" name="loginEmail" required>
        </div>
        <div class="form-group">
            <label>Password</label>
            <input type="password" name="loginPass" required>
        </div>
        <button type="submit" class="btn btn-block">Sign In</button>
    </form>

    <form id="register-form" style="display: none;">
        <div class="form-group">
            <label>Full Name</label>
            <input type="text" name="regName" required>
        </div>
        <div class="form-group">
            <label>Email Address</label>
            <input type="email" name="regEmail" required>
        </div>
        <div class="form-group">
            <label>Password</label>
            <input type="password" name="regPass" required minlength="6">
        </div>
        <button type="submit" class="btn btn-block">Create Account</button>
    </form>

    <p id="toggle-auth" class="switch-auth">Don't have an account? Register</p>
</div>

<div id="toast-container"></div>

<script src="data.js"></script>
<script src="script.js"></script>
<script>
    // ================================
// AUTH PAGE TRANSLATION SYSTEM
// ================================

const authTranslations = {
    en: {
        // Header
        logo: "il vanto",
        
        // Form Titles
        signin_title: "Sign In",
        register_title: "Create Account",
        
        // Labels
        label_email: "Email Address",
        label_password: "Password",
        label_name: "Full Name",
        
        // Buttons
        btn_signin: "Sign In",
        btn_register: "Create Account",
        
        // Links
        toggle_register: "Don't have an account? Register",
        toggle_signin: "Already have an account? Sign In",
        
        // Validation Messages
        password_length: "Password must be at least 6 characters",
        email_required: "Email is required",
        name_required: "Full name is required",
        
        // Success Messages
        login_success: "Login successful!",
        register_success: "Account created successfully!",
        
        // Error Messages
        login_error: "Invalid email or password",
        register_error: "Email already registered"
    },
    
    ar: {
        // Header
        logo: "il vanto",
        
        // Form Titles
        signin_title: "ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ",
        register_title: "ÿ•ŸÜÿ¥ÿßÿ° ÿ≠ÿ≥ÿßÿ®",
        
        // Labels
        label_email: "ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä",
        label_password: "ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ±",
        label_name: "ÿßŸÑÿßÿ≥ŸÖ ÿßŸÑŸÉÿßŸÖŸÑ",
        
        // Buttons
        btn_signin: "ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ",
        btn_register: "ÿ•ŸÜÿ¥ÿßÿ° ÿ≠ÿ≥ÿßÿ®",
        
        // Links
        toggle_register: "ŸÑŸäÿ≥ ŸÑÿØŸäŸÉ ÿ≠ÿ≥ÿßÿ®ÿü ÿ≥ÿ¨ŸÑ ÿßŸÑÿ¢ŸÜ",
        toggle_signin: "ŸÑÿØŸäŸÉ ÿ≠ÿ≥ÿßÿ® ÿ®ÿßŸÑŸÅÿπŸÑÿü ÿ≥ÿ¨ŸÑ ÿßŸÑÿØÿÆŸàŸÑ",
        
        // Validation Messages
        password_length: "ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± Ÿäÿ¨ÿ® ÿ£ŸÜ ÿ™ŸÉŸàŸÜ 6 ÿ£ÿ≠ÿ±ŸÅ ÿπŸÑŸâ ÿßŸÑÿ£ŸÇŸÑ",
        email_required: "ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä ŸÖÿ∑ŸÑŸàÿ®",
        name_required: "ÿßŸÑÿßÿ≥ŸÖ ÿßŸÑŸÉÿßŸÖŸÑ ŸÖÿ∑ŸÑŸàÿ®",
        
        // Success Messages
        login_success: "ÿ™ŸÖ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ ÿ®ŸÜÿ¨ÿßÿ≠!",
        register_success: "ÿ™ŸÖ ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑÿ≠ÿ≥ÿßÿ® ÿ®ŸÜÿ¨ÿßÿ≠!",
        
        // Error Messages
        login_error: "ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä ÿ£Ÿà ŸÉŸÑŸÖÿ© ÿßŸÑŸÖÿ±Ÿàÿ± ÿ∫Ÿäÿ± ÿµÿ≠Ÿäÿ≠ÿ©",
        register_error: "ÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä ŸÖÿ≥ÿ¨ŸÑ ÿ®ÿßŸÑŸÅÿπŸÑ"
    },
    
    zh: {
        // Header
        logo: "il vanto",
        
        // Form Titles
        signin_title: "ÁôªÂΩï",
        register_title: "ÂàõÂª∫Ë¥¶Êà∑",
        
        // Labels
        label_email: "ÁîµÂ≠êÈÇÆ‰ª∂Âú∞ÂùÄ",
        label_password: "ÂØÜÁ†Å",
        label_name: "ÂÖ®Âêç",
        
        // Buttons
        btn_signin: "ÁôªÂΩï",
        btn_register: "ÂàõÂª∫Ë¥¶Êà∑",
        
        // Links
        toggle_register: "Ê≤°ÊúâË¥¶Êà∑ÔºüÊ≥®ÂÜå",
        toggle_signin: "Â∑≤ÊúâË¥¶Êà∑ÔºüÁôªÂΩï",
        
        // Validation Messages
        password_length: "ÂØÜÁ†ÅËá≥Â∞ë6‰∏™Â≠óÁ¨¶",
        email_required: "ÁîµÂ≠êÈÇÆ‰ª∂ÂøÖÂ°´",
        name_required: "ÂÖ®ÂêçÂøÖÂ°´",
        
        // Success Messages
        login_success: "ÁôªÂΩïÊàêÂäüÔºÅ",
        register_success: "Ë¥¶Êà∑ÂàõÂª∫ÊàêÂäüÔºÅ",
        
        // Error Messages
        login_error: "ÁîµÂ≠êÈÇÆ‰ª∂ÊàñÂØÜÁ†ÅÊó†Êïà",
        register_error: "ÁîµÂ≠êÈÇÆ‰ª∂Â∑≤Ê≥®ÂÜå"
    }
};

// Apply translation to the auth page
function applyAuthTranslation(lang) {
    // Update HTML lang attribute
    document.documentElement.lang = lang;
    
    // Save selected language
    localStorage.setItem('auth-lang', lang);
    
    // Update language button
    updateAuthLanguageButton(lang);
    
    // Get translation object
    const t = authTranslations[lang] || authTranslations.en;
    
    // Apply translations to elements with data-translate attribute
    document.querySelectorAll('[data-translate]').forEach(element => {
        const key = element.getAttribute('data-translate');
        if (t[key]) {
            element.textContent = t[key];
        }
    });
    
    // Apply translations to labels and placeholders
    const elements = {
        '#form-title': t.signin_title,
        '.logo': t.logo,
        'input[name="loginEmail"]': { placeholder: t.label_email },
        'input[name="loginPass"]': { placeholder: t.label_password },
        'input[name="regName"]': { placeholder: t.label_name },
        'input[name="regEmail"]': { placeholder: t.label_email },
        'input[name="regPass"]': { placeholder: t.label_password },
        '#login-form button': t.btn_signin,
        '#register-form button': t.btn_register,
        '#toggle-auth': t.toggle_register
    };
    
    // Apply to elements
    Object.keys(elements).forEach(selector => {
        const element = document.querySelector(selector);
        if (element) {
            if (typeof elements[selector] === 'string') {
                element.textContent = elements[selector];
            } else {
                Object.keys(elements[selector]).forEach(attr => {
                    element[attr] = elements[selector][attr];
                });
            }
        }
    });
    
    // Apply to labels
    const labels = document.querySelectorAll('.form-group label');
    labels.forEach((label, index) => {
        const input = label.nextElementSibling;
        if (input) {
            const inputName = input.getAttribute('name');
            switch(inputName) {
                case 'loginEmail':
                case 'regEmail':
                    label.textContent = t.label_email;
                    break;
                case 'loginPass':
                case 'regPass':
                    label.textContent = t.label_password;
                    break;
                case 'regName':
                    label.textContent = t.label_name;
                    break;
            }
        }
    });
    
    // Apply RTL for Arabic
    if (lang === 'ar') {
        document.body.style.direction = 'rtl';
        document.body.style.textAlign = 'right';
        
        // Keep header LTR
        const header = document.querySelector('header');
        if (header) {
            header.style.direction = 'ltr';
            header.style.textAlign = 'left';
        }
        
        // Align form elements for RTL
        const formGroups = document.querySelectorAll('.form-group');
        formGroups.forEach(group => {
            group.style.textAlign = 'right';
        });
        
        const inputs = document.querySelectorAll('input');
        inputs.forEach(input => {
            input.style.textAlign = 'right';
        });
        
        const buttons = document.querySelectorAll('button');
        buttons.forEach(button => {
            button.style.textAlign = 'center';
        });
    } else {
        document.body.style.direction = 'ltr';
        document.body.style.textAlign = 'left';
        
        // Reset styles for other languages
        const formGroups = document.querySelectorAll('.form-group');
        formGroups.forEach(group => {
            group.style.textAlign = '';
        });
        
        const inputs = document.querySelectorAll('input');
        inputs.forEach(input => {
            input.style.textAlign = '';
        });
    }
    
    // Update form title based on current form
    updateFormTitle();
}

// Update language button text
function updateAuthLanguageButton(lang) {
    const button = document.querySelector('.language-btn span');
    const langTexts = {
        en: 'üåê EN',
        ar: 'üåê ÿπÿ±ÿ®Ÿä',
        zh: 'üåê ‰∏≠Êñá'
    };
    
    if (button && langTexts[lang]) {
        button.textContent = langTexts[lang];
    }
}

// Update form title when toggling
function updateFormTitle() {
    const formTitle = document.getElementById('form-title');
    const loginForm = document.getElementById('login-form');
    const currentLang = localStorage.getItem('auth-lang') || 'en';
    const t = authTranslations[currentLang] || authTranslations.en;
    
    if (loginForm.style.display === 'none') {
        formTitle.textContent = t.register_title;
    } else {
        formTitle.textContent = t.signin_title;
    }
}

// Initialize auth translation system
function initAuthTranslation() {
    // Add data-translate attributes if needed
    const elementsToTranslate = {
        '.logo': 'logo',
        '#form-title': 'signin_title',
        '#toggle-auth': 'toggle_register'
    };
    
    Object.keys(elementsToTranslate).forEach(selector => {
        const element = document.querySelector(selector);
        if (element && !element.hasAttribute('data-translate')) {
            element.setAttribute('data-translate', elementsToTranslate[selector]);
        }
    });
    
    // Set up language switcher events
    const langLinks = document.querySelectorAll('.language-dropdown a');
    langLinks.forEach(link => {
        link.addEventListener('click', (e) => {
            e.preventDefault();
            const lang = link.getAttribute('data-lang');
            applyAuthTranslation(lang);
            
            // Close dropdown
            document.querySelector('.language-dropdown').classList.remove('show');
        });
    });
    
    // Language button click event
    const languageBtn = document.querySelector('.language-btn');
    const languageDropdown = document.querySelector('.language-dropdown');
    
    if (languageBtn) {
        languageBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            languageDropdown.classList.toggle('show');
        });
        
        // Close dropdown when clicking outside
        document.addEventListener('click', () => {
            languageDropdown.classList.remove('show');
        });
        
        // Prevent closing when clicking inside dropdown
        languageDropdown.addEventListener('click', (e) => {
            e.stopPropagation();
        });
    }
    
    // Update toggle link when switching forms
    const toggleLink = document.getElementById('toggle-auth');
    if (toggleLink) {
        toggleLink.addEventListener('click', () => {
            // This will be handled by your existing script
            // We just need to update the translation after toggle
            setTimeout(() => {
                const currentLang = localStorage.getItem('auth-lang') || 'en';
                const t = authTranslations[currentLang] || authTranslations.en;
                
                if (document.getElementById('login-form').style.display === 'none') {
                    toggleLink.textContent = t.toggle_signin;
                } else {
                    toggleLink.textContent = t.toggle_register;
                }
                
                updateFormTitle();
            }, 50);
        });
    }
    
    // Load saved language or default to English
    const savedLang = localStorage.getItem('auth-lang') || 
                     localStorage.getItem('site-lang') || 
                     'en';
    applyAuthTranslation(savedLang);
    
    // Monitor form changes for translation updates
    observeFormChanges();
}

// Observe form changes to update translations
function observeFormChanges() {
    // Create a mutation observer to watch for form visibility changes
    const observer = new MutationObserver(() => {
        updateFormTitle();
        
        // Update toggle link text
        const toggleLink = document.getElementById('toggle-auth');
        if (toggleLink) {
            const currentLang = localStorage.getItem('auth-lang') || 'en';
            const t = authTranslations[currentLang] || authTranslations.en;
            
            if (document.getElementById('login-form').style.display === 'none') {
                toggleLink.textContent = t.toggle_signin;
            } else {
                toggleLink.textContent = t.toggle_register;
            }
        }
    });
    
    // Observe form display changes
    const loginForm = document.getElementById('login-form');
    const registerForm = document.getElementById('register-form');
    
    if (loginForm) {
        observer.observe(loginForm, { attributes: true, attributeFilter: ['style'] });
    }
    
    if (registerForm) {
        observer.observe(registerForm, { attributes: true, attributeFilter: ['style'] });
    }
}

// Show toast message with translation
function showTranslatedToast(messageKey, type = 'success') {
    const currentLang = localStorage.getItem('auth-lang') || 'en';
    const t = authTranslations[currentLang] || authTranslations.en;
    const message = t[messageKey] || messageKey;
    
    // Use your existing toast function or create a simple one
    const toastContainer = document.getElementById('toast-container');
    if (toastContainer) {
        const toast = document.createElement('div');
        toast.className = `toast ${type}`;
        toast.textContent = message;
        toastContainer.appendChild(toast);
        
        // Remove after 3 seconds
        setTimeout(() => {
            toast.remove();
        }, 3000);
    }
}

// Initialize when DOM is loaded
document.addEventListener('DOMContentLoaded', initAuthTranslation);

// If you have existing form validation, you can integrate translation
function validateFormWithTranslation(formData, isRegister = false) {
    const currentLang = localStorage.getItem('auth-lang') || 'en';
    const t = authTranslations[currentLang] || authTranslations.en;
    
    // Email validation
    if (!formData.email) {
        showTranslatedToast('email_required', 'error');
        return false;
    }
    
    // Password validation
    if (!formData.password || formData.password.length < 6) {
        showTranslatedToast('password_length', 'error');
        return false;
    }
    
    // Name validation for registration
    if (isRegister && !formData.name) {
        showTranslatedToast('name_required', 'error');
        return false;
    }
    
    return true;
}
</script>

</body>
</html>
